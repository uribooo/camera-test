<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Camera Debug</title>
</head>
<body>
  <h1>カメラデバッグ</h1>
  <video id="video" autoplay playsinline muted width="400" style="background:#ccc;"></video>
  <pre id="log" style="color:red;"></pre>

  <script>
    function log(msg) {
      document.getElementById("log").textContent += msg + "\n";
    }

    log("ページ読み込み開始");

    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
      log("このブラウザは getUserMedia に対応していません");
    } else {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
          log("カメラ取得成功");
          const video = document.getElementById("video");
          video.srcObject = stream;
          video.play().then(() => {
            log("再生開始成功");
          }).catch(err => {
            log("再生エラー: " + err.name + " - " + err.message);
          });
        })
        .catch(err => {
          log("カメラ取得エラー: " + err.name + " - " + err.message);
        });
    }
  </script>
</body>
</html>
